{"ast":null,"code":"import _regeneratorRuntime from\"/home/tom/\\xC1rea de Trabalho/Personal_Projects/vehicles-challenge/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/tom/\\xC1rea de Trabalho/Personal_Projects/vehicles-challenge/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import React from'react';import{useEffect,useContext,useCallback}from'react';import{getAll,deleteVehicle,toggleFavorite,getById}from'../../services/API.js';import VehiclesCard from'../../components/VehiclesCard/index.js';import SearchBar from'../../components/SearchBar/index.js';import AppContext from'../../context/AppContext.js';import AddButton from'../../components/AddButton/index.js';import style from'./style.module.css';import{useNavigate}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Home(){var navigate=useNavigate();var _useContext=useContext(AppContext),data=_useContext.data,setData=_useContext.setData;var fetchAllData=useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return getAll();case 2:response=_context.sent;setData(response);case 4:case\"end\":return _context.stop();}}},_callee);})),[setData]);useEffect(function(){fetchAllData();},[fetchAllData]);var deleteBtn=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(_ref2){var target,id;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:target=_ref2.target;id=target.parentElement.parentElement.id;_context2.next=4;return deleteVehicle(id);case 4:fetchAllData();case 5:case\"end\":return _context2.stop();}}},_callee2);}));return function deleteBtn(_x){return _ref3.apply(this,arguments);};}();var editBtn=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(_ref4){var target,id;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:target=_ref4.target;id=target.parentElement.parentElement.id;navigate(\"/edit/\".concat(id));case 3:case\"end\":return _context3.stop();}}},_callee3);}));return function editBtn(_x2){return _ref5.apply(this,arguments);};}();var favoriteBtn=/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(_ref6){var target,id,favorite,structure;return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:target=_ref6.target;id=target.parentElement.parentElement.id;_context4.next=4;return getById(id);case 4:favorite=_context4.sent;structure={favorite:!favorite[0].favorited};_context4.next=8;return toggleFavorite(structure,id);case 8:case\"end\":return _context4.stop();}}},_callee4);}));return function favoriteBtn(_x3){return _ref7.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"main\",{children:[/*#__PURE__*/_jsx(SearchBar,{getAllBtn:fetchAllData}),/*#__PURE__*/_jsx(AddButton,{}),/*#__PURE__*/_jsx(\"div\",{className:style.title,children:!data.message&&data.length>0?/*#__PURE__*/_jsx(\"h3\",{children:\"Meus An\\xFAncios\"}):undefined}),/*#__PURE__*/_jsx(\"div\",{className:style.cardsContainer,children:data.message?/*#__PURE__*/_jsx(\"h1\",{className:style.error,children:data.message}):data.map(function(item){return/*#__PURE__*/_jsx(VehiclesCard,{check:item.favorited,favoriteBtn:favoriteBtn,editBtn:editBtn,deleteBtn:deleteBtn,id:item.id,title:\"\".concat(item.brand,\" \").concat(item.name),price:item.price,description:item.description,year:item.year,color:item.color},item.id);})})]});}","map":{"version":3,"names":["React","useEffect","useContext","useCallback","getAll","deleteVehicle","toggleFavorite","getById","VehiclesCard","SearchBar","AppContext","AddButton","style","useNavigate","Home","navigate","data","setData","fetchAllData","response","deleteBtn","target","id","parentElement","editBtn","favoriteBtn","favorite","structure","favorited","title","message","length","undefined","cardsContainer","error","map","item","brand","name","price","description","year","color"],"sources":["/home/tom/Área de Trabalho/Personal_Projects/vehicles-challenge/frontend/src/pages/Home/index.js"],"sourcesContent":["import React from 'react';\nimport { useEffect, useContext, useCallback } from 'react';\nimport { getAll, deleteVehicle, toggleFavorite, getById } from '../../services/API.js';\nimport VehiclesCard from '../../components/VehiclesCard/index.js';\nimport SearchBar from '../../components/SearchBar/index.js';\nimport AppContext  from '../../context/AppContext.js';\nimport AddButton from '../../components/AddButton/index.js';\nimport style from './style.module.css';\nimport { useNavigate } from 'react-router-dom';\n\nexport default function Home() {\n\n  const navigate = useNavigate();\n\n  const { data, setData } = useContext(AppContext);\n\n  const fetchAllData = useCallback(async () => {\n      const response = await getAll();\n      setData(response)\n  }, [setData]);\n\n\n  useEffect(() => {\n    fetchAllData();\n  }, [fetchAllData]);\n\n  const deleteBtn = async ( { target} ) => {\n    const id = target.parentElement.parentElement.id;\n    await deleteVehicle(id);\n    fetchAllData();\n  };\n\n  const editBtn = async ( { target } ) => {\n    const id = target.parentElement.parentElement.id;\n    navigate(`/edit/${id}`);\n  }\n\n  const favoriteBtn = async ( { target } ) => {\n    const id = target.parentElement.parentElement.id;\n    const favorite = await getById(id);\n    const structure = {\n      favorite: !favorite[0].favorited\n    }\n    await toggleFavorite(structure, id);\n  }\n\n  return (\n\n    <main>\n\n        <SearchBar getAllBtn={ fetchAllData } />\n        <AddButton />\n        <div className={ style.title }>\n        {!data.message && data.length > 0 ? <h3>Meus Anúncios</h3> : undefined }\n        </div>\n      <div className={ style.cardsContainer }> \n      \n        { data.message ? \n        <h1 className={ style.error } >{data.message}</h1> \n        :\n        data.map(item => \n        <VehiclesCard\n          check={item.favorited}\n          favoriteBtn={favoriteBtn}\n          editBtn={ editBtn }\n          deleteBtn={ deleteBtn }\n          id={item.id}\n          key={item.id}\n          title={`${item.brand} ${item.name}`}\n          price={item.price}\n          description={item.description}\n          year={item.year}\n          color={item.color}\n        />)  }\n      </div>\n    </main>\n  )\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import _objectSpread from\"/home/tom/\\xC1rea de Trabalho/Personal_Projects/vehicles-challenge/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/home/tom/\\xC1rea de Trabalho/Personal_Projects/vehicles-challenge/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/home/tom/\\xC1rea de Trabalho/Personal_Projects/vehicles-challenge/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/tom/\\xC1rea de Trabalho/Personal_Projects/vehicles-challenge/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import React,{useState,useEffect,useContext}from'react';import{getAll}from'../../services/API';import{useForm}from'react-hook-form';import{yupResolver}from'@hookform/resolvers/yup';import*as yup from\"yup\";import{getByFilters}from'../../services/API';import AppContext from'../../context/AppContext.js';import style from'./style.module.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Filters(props){var close=props.close;var _useContext=useContext(AppContext),setData=_useContext.setData;var schema=yup.object({brand:yup.string().required('É necessário que o campo de marca seja preenchido'),color:yup.string().required('É necessário que o campo de cor seja preenchido'),year:yup.string().required('É necessário que o campo de ano seja preenchido'),min:yup.number().positive().integer().required(),max:yup.number().positive().integer().required()}).required();var _useForm=useForm({resolver:yupResolver(schema)}),register=_useForm.register,handleSubmit=_useForm.handleSubmit;var onSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(data){var filteredData;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return getByFilters(data.brand,data.color,data.year,data.min,data.max);case 2:filteredData=_context.sent;setData(filteredData);close();case 5:case\"end\":return _context.stop();}}},_callee);}));return function onSubmit(_x){return _ref.apply(this,arguments);};}();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),brands=_useState2[0],setBrands=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),colors=_useState4[0],setColors=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),years=_useState6[0],setYeats=_useState6[1];var getFilters=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var response;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return getAll();case 2:response=_context2.sent;setBrands(response.map(function(item){return item.brand;}));setColors(response.map(function(item){return item.color;}));setYeats(response.map(function(item){return item.year;}));case 6:case\"end\":return _context2.stop();}}},_callee2);}));return function getFilters(){return _ref2.apply(this,arguments);};}();useEffect(function(){getFilters();},[]);return/*#__PURE__*/_jsx(\"main\",{children:/*#__PURE__*/_jsxs(\"form\",{className:style.form,onSubmit:handleSubmit(onSubmit),children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h6\",{children:\"Marca:\"}),/*#__PURE__*/_jsxs(\"select\",_objectSpread(_objectSpread({},register(\"brand\",{required:true})),{},{children:[/*#__PURE__*/_jsx(\"option\",{}),brands.map(function(brand){return/*#__PURE__*/_jsx(\"option\",{value:brand,children:brand},brand);})]}))]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h6\",{children:\"Ano:\"}),/*#__PURE__*/_jsxs(\"select\",_objectSpread(_objectSpread({},register(\"year\",{required:true})),{},{children:[/*#__PURE__*/_jsx(\"option\",{}),years.map(function(year){return/*#__PURE__*/_jsx(\"option\",{value:year,children:year},year);})]}))]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h6\",{children:\"Cor:\"}),/*#__PURE__*/_jsxs(\"select\",_objectSpread(_objectSpread({},register(\"color\",{required:true})),{},{children:[/*#__PURE__*/_jsx(\"option\",{}),colors.map(function(color){return/*#__PURE__*/_jsx(\"option\",{value:color,children:color},color);})]}))]}),/*#__PURE__*/_jsxs(\"div\",{className:style.price,children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h6\",{children:\"Pre\\xE7o m\\xEDn.\"}),/*#__PURE__*/_jsx(\"input\",_objectSpread({type:\"number\"},register(\"min\",{min:1,required:true})))]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h6\",{children:\"Pre\\xE7o m\\xE1x.\"}),/*#__PURE__*/_jsx(\"input\",_objectSpread({type:\"number\"},register(\"max\",{min:1,required:true})))]})]}),/*#__PURE__*/_jsx(\"button\",{className:style.submitBtn,type:\"submit\",children:\"Filtrar\"})]})});}","map":{"version":3,"names":["React","useState","useEffect","useContext","getAll","useForm","yupResolver","yup","getByFilters","AppContext","style","Filters","props","close","setData","schema","object","brand","string","required","color","year","min","number","positive","integer","max","resolver","register","handleSubmit","onSubmit","data","filteredData","brands","setBrands","colors","setColors","years","setYeats","getFilters","response","map","item","form","price","submitBtn"],"sources":["/home/tom/Área de Trabalho/Personal_Projects/vehicles-challenge/frontend/src/components/Filters/index.js"],"sourcesContent":["import React, { useState, useEffect, useContext } from 'react';\nimport { getAll } from '../../services/API';\nimport { useForm } from 'react-hook-form';\nimport { yupResolver } from '@hookform/resolvers/yup';\nimport * as yup from \"yup\";\nimport { getByFilters } from '../../services/API';\nimport AppContext from '../../context/AppContext.js';\nimport style from './style.module.css';\n\nexport default function Filters(props) {\n\n  const { close } = props;\n\n  const { setData } = useContext(AppContext);\n\n  const schema = yup.object({\n    brand: yup.string().required('É necessário que o campo de marca seja preenchido'),\n    color: yup.string().required('É necessário que o campo de cor seja preenchido'),\n    year: yup.string().required('É necessário que o campo de ano seja preenchido'),\n    min: yup.number().positive().integer().required(),\n    max: yup.number().positive().integer().required(),\n  }).required();\n\n  const { register, handleSubmit } = useForm({\n    resolver: yupResolver(schema)\n  });\n  const onSubmit = async (data) => {\n    const filteredData = await getByFilters(data.brand, data.color, data.year, data.min, data.max);\n    setData(filteredData);\n    close();\n  };\n\n  const [brands, setBrands] = useState([]);\n  const [colors, setColors] = useState([]);\n  const [years, setYeats] = useState([]);\n\n  const getFilters = async () => {\n    const response = await getAll();\n    setBrands(response.map((item) => item.brand));\n    setColors(response.map((item) => item.color));\n    setYeats(response.map((item) => item.year));\n  }\n\n  useEffect(() => {\n    getFilters();\n  }, []);\n\n  return (\n    <main>\n      <form className={ style.form } onSubmit={handleSubmit(onSubmit)}>\n        <div>\n          <h6>Marca:</h6>\n          <select {...register(\"brand\", { required: true })}>\n            <option></option>\n            {brands.map((brand) => <option key={brand} value={brand}>{brand}</option>)}\n          </select>\n        </div>\n        <div>\n          <h6>Ano:</h6>\n          <select {...register(\"year\", { required: true })}>\n            <option></option>\n            {years.map((year) => <option key={year} value={year}>{year}</option>)}\n          </select>\n        </div>\n        <div>\n          <h6>Cor:</h6>\n          <select {...register(\"color\", { required: true })}>\n            <option></option>\n            {colors.map((color) => <option key={color} value={color}>{color}</option>)}\n          </select>\n        </div>\n        <div className={ style.price }>\n          <div>\n            <h6>Preço mín.</h6>\n            <input type=\"number\" {...register(\"min\", { min: 1, required:true })} />\n          </div>\n          <div>\n            <h6>Preço máx.</h6>\n            <input type=\"number\" {...register(\"max\", { min: 1, required:true })} />\n          </div>\n        </div>\n        <button className={ style.submitBtn } type=\"submit\">Filtrar</button>\n    </form>\n    </main>\n  )\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}